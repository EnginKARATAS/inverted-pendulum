clc; clear; close all;

% Define system parameters
g = 9.807;          % m/s^2
massPendulum = 0.25; % kg
massCart = 0.320;    % kg
massSystem = massPendulum + massCart;
L = 0.3; % m
lengthTotal = L*2;
MOI = (1/3)*massPendulum*lengthTotal^2;
beta = massPendulum*L/(massPendulum*L^2 + MOI);
frictionCoeff = 0.5;
denominator = massCart + massPendulum*(1 - L*beta);

% This represents the value of cos(theta equilibrium). So if we want to
% analyze the up position, theta = 0, so cos(0) = 1. If we want to analyze
% the down position then theta = pi, cos(pi) = -1.
equilibriumPoint = 1;

% Create state space model
A = [0, 0, 1, 0;
     0, 0, 0, 1;
     g*beta*massSystem*equilibriumPoint/denominator, 0, 0, -frictionCoeff*beta*equilibriumPoint/denominator;
     massPendulum*g*L*beta/denominator, 0, 0, -frictionCoeff/denominator];
 
 B = [0;
      0;
      beta*equilibriumPoint/denominator;
      1/denominator];
  
  C = [1, 0, 0, 0;
       0, 1, 0, 0];
   
   D = 0;
   
   model = ss(A, B, C, D);
   
   eig(A)